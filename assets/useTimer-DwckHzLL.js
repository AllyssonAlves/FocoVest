import{a as b}from"./rolldown-runtime-Dq6TatWD.js";import{jt as F}from"./react-vendor-wmn9h6gZ.js";var n=b(F());function I(t){const{initialTime:l,onTimeUp:r,onTick:c,warningThreshold:o=300,criticalThreshold:m=60}=t,[s,u]=(0,n.useState)({timeRemaining:l,isRunning:!1,isPaused:!1,isFinished:!1,isWarning:!1,isCritical:!1,elapsedTime:0,startTime:null,pausedTime:0}),a=(0,n.useRef)(null),f=(0,n.useRef)(null);(0,n.useEffect)(()=>()=>{a.current&&clearInterval(a.current)},[]),(0,n.useEffect)(()=>{if(s.isRunning&&!s.isPaused&&!s.isFinished)return a.current=setInterval(()=>{u(e=>{const i=Math.max(0,e.timeRemaining-1),w=e.startTime?Math.floor((Date.now()-e.startTime-e.pausedTime)/1e3):0,k=i<=o&&i>m,S=i<=m&&i>0,d=i===0;return c&&(i%10===0&&console.log("⏰ Timer tick:",i,"segundos"),c(i)),d&&r&&r(),{...e,timeRemaining:i,elapsedTime:w,isWarning:k,isCritical:S,isFinished:d,isRunning:!d}})},1e3),()=>{a.current&&clearInterval(a.current)}},[s.isRunning,s.isPaused,s.isFinished,r,c,o,m]);const g=(0,n.useCallback)(()=>{u(e=>({...e,isRunning:!0,isPaused:!1,isFinished:!1,startTime:Date.now(),pausedTime:0}))},[]),T=(0,n.useCallback)(()=>{s.isRunning&&!s.isPaused&&(f.current=Date.now(),u(e=>({...e,isPaused:!0})))},[s.isRunning,s.isPaused]),h=(0,n.useCallback)(()=>{if(s.isPaused&&f.current){const e=Date.now()-f.current;u(i=>({...i,isPaused:!1,pausedTime:i.pausedTime+e})),f.current=null}},[s.isPaused]),R=(0,n.useCallback)(()=>{u(e=>({...e,isRunning:!1,isPaused:!1,isFinished:!0})),a.current&&clearInterval(a.current)},[]),p=(0,n.useCallback)(()=>{u({timeRemaining:l,isRunning:!1,isPaused:!1,isFinished:!1,isWarning:!1,isCritical:!1,elapsedTime:0,startTime:null,pausedTime:0}),a.current&&clearInterval(a.current)},[l]),P=(0,n.useCallback)(e=>{u(i=>({...i,timeRemaining:Math.max(0,i.timeRemaining+e)}))},[]),C=(0,n.useCallback)(e=>{u(i=>({...i,timeRemaining:Math.max(0,e)}))},[]);return[s,{start:g,pause:T,resume:h,stop:R,reset:p,addTime:P,setTime:C}]}const $=(t,l=!0)=>{const r=Math.floor(t/3600),c=Math.floor(t%3600/60),o=t%60;return l&&r>0?`${r.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${c.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},x=(t,l=300,r=60)=>t===0?"finished":t<=r?"critical":t<=l?"warning":"normal",_=t=>{switch(t){case"critical":return"red";case"warning":return"yellow";case"finished":return"gray";default:return"green"}};export{I as i,_ as n,x as r,$ as t};
