import{a as h}from"./rolldown-runtime-Dq6TatWD.js";import{Ct as r,Dt as g,Pt as N,Tt as E,ct as S,ht as k,jt as C,mt as M,ut as A}from"./react-vendor-BpwrftXY.js";import{n as L}from"./vendor-DgHb_Dai.js";import{t as _}from"./index-Colr5HAt.js";var d=h(N()),e=h(E());function q(){const l=C(),{login:p,isLoading:u,isAuthenticated:x,loginAttempts:f,clearLoginAttempts:b}=_(),[s,y]=(0,d.useState)({email:"",password:"",rememberMe:!1}),[m,v]=(0,d.useState)(!1);(0,d.useEffect)(()=>{x&&l("/dashboard")},[x,l]);const j=async o=>{o.preventDefault();try{if(!s.email.trim()){r.error("Email é obrigatório");return}if(!s.password){r.error("Senha é obrigatória");return}f>=3&&r("Muitas tentativas de login. Aguarde alguns minutos.",{icon:"⚠️"});const t=()=>{const a=navigator.userAgent;let i="Unknown",n="Unknown";return a.includes("Chrome")?i="Chrome":a.includes("Firefox")?i="Firefox":a.includes("Safari")?i="Safari":a.includes("Edge")?i="Edge":a.includes("Opera")&&(i="Opera"),a.includes("Windows")?n="Windows":a.includes("Mac")?n="macOS":a.includes("Linux")?n="Linux":a.includes("Android")?n="Android":(a.includes("iPhone")||a.includes("iPad"))&&(n="iOS"),{userAgent:a,platform:navigator.platform,language:navigator.language,browser:i,os:n,screenResolution:`${window.screen.width}x${window.screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,cookieEnabled:navigator.cookieEnabled,onlineStatus:navigator.onLine}},w={rememberMe:s.rememberMe,deviceInfo:t()};await p(s.email,s.password,w),b(),r.success("Login realizado com sucesso!"),l("/dashboard")}catch(t){console.error("Erro no login:",t),t.message?.includes("Rate limit")||t.message?.includes("Muitas tentativas")?r.error("Muitas tentativas de login. Aguarde alguns minutos antes de tentar novamente."):t.message?.includes("incorretos")?r.error("Email ou senha incorretos"):r.error(t.message||"Erro no login. Tente novamente.")}},c=o=>{y({...s,[o.target.name]:o.target.value})};return(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center py-12 px-4",children:(0,e.jsx)(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-md w-full",children:(0,e.jsxs)("div",{className:"card",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Bem-vindo de volta!"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Entre na sua conta para continuar estudando"})]}),(0,e.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,e.jsx)("input",{type:"email",id:"login-email",name:"email",value:s.email,onChange:c,className:"input pl-10",placeholder:"seu@email.com",required:!0,autoComplete:"email"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,e.jsx)("input",{type:m?"text":"password",id:"login-password",name:"password",value:s.password,onChange:c,className:"input pl-10 pr-10",placeholder:"••••••••",required:!0,autoComplete:"current-password"}),(0,e.jsx)("button",{type:"button",onClick:()=>v(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?(0,e.jsx)(k,{className:"w-5 h-5"}):(0,e.jsx)(M,{className:"w-5 h-5"})})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("label",{htmlFor:"remember-me",className:"flex items-center",children:[(0,e.jsx)("input",{type:"checkbox",id:"remember-me",name:"rememberMe",checked:s.rememberMe,onChange:c,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),(0,e.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Lembrar de mim"})]}),(0,e.jsx)(g,{to:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700",children:"Esqueceu a senha?"})]}),(0,e.jsx)("button",{type:"submit",disabled:u,className:"btn-primary w-full disabled:opacity-50",children:u?"Entrando...":"Entrar"})]}),(0,e.jsx)("div",{className:"mt-8 text-center",children:(0,e.jsxs)("p",{className:"text-gray-600",children:["Não tem uma conta?"," ",(0,e.jsx)(g,{to:"/register",className:"text-primary-600 hover:text-primary-700 font-semibold",children:"Cadastre-se"})]})})]})})})}export{q as default};
