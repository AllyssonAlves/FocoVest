import{a as k}from"./rolldown-runtime-Dq6TatWD.js";import{K as H,O as L,P as C,Pt as J,Tt as V,a as S,f as W,z as K}from"./react-vendor-BpwrftXY.js";import{n as x}from"./vendor-DgHb_Dai.js";import{t as X}from"./index-Daf2CfgW.js";var i=k(J()),e=k(V());function se(){const{token:h,isAuthenticated:j}=X(),[p,c]=(0,i.useState)([]),[y,g]=(0,i.useState)(!1),[v,r]=(0,i.useState)(null),[n,M]=(0,i.useState)(""),[N,_]=(0,i.useState)(""),[b,E]=(0,i.useState)(""),[f,Q]=(0,i.useState)(""),[w,T]=(0,i.useState)("hybrid"),[A,R]=(0,i.useState)(5),U=["Matemática","Física","Química","Biologia","Português","História","Geografia"],$=[{value:"easy",label:"Fácil"},{value:"medium",label:"Médio"},{value:"hard",label:"Difícil"}],G=["UFC","UECE","UVA","URCA","ENEM"],I=[{value:"template",label:"Template",description:"Baseado em modelos predefinidos"},{value:"ai_pattern",label:"IA Avançada",description:"Análise de padrões com IA"},{value:"hybrid",label:"Híbrido",description:"Combinação inteligente dos métodos"}],D=async()=>{if(!n){r("Selecione uma matéria");return}try{if(g(!0),r(null),!j||!h){r("Usuário não autenticado");return}const s=await(await fetch("/api/ai/generate-question",{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({subject:n,topic:N||void 0,difficulty:b||void 0,university:f||void 0,method:w})})).json();if(s.success){const t={...s.data.question,id:Date.now().toString()+Math.random().toString(36),isAnswered:!1,showResult:!1};c(a=>[t,...a])}else r(s.message||"Erro ao gerar questão")}catch(s){r("Erro ao conectar com o servidor"),console.error("Erro ao gerar questão:",s)}finally{g(!1)}},B=async()=>{try{if(g(!0),r(null),!j||!h){r("Usuário não autenticado");return}const s=await(await fetch("/api/ai/generate-question-batch",{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({count:A,subjects:n?[n]:void 0,difficulties:b?[b]:void 0,universities:f?[f]:void 0})})).json();if(s.success){const t=s.data.questions.map(a=>({...a,id:Date.now().toString()+Math.random().toString(36),isAnswered:!1,showResult:!1}));c(a=>[...t,...a])}else r(s.message||"Erro ao gerar lote de questões")}catch(s){r("Erro ao conectar com o servidor"),console.error("Erro ao gerar lote:",s)}finally{g(!1)}},P=s=>{switch(s){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},F=(s,t)=>{c(a=>a.map(l=>l.id===s?{...l,userAnswer:t,isAnswered:!0}:l))},O=s=>{c(t=>t.map(a=>a.id===s?{...a,showResult:!0}:a))},z=s=>{switch(s){case"template":return"text-blue-600 bg-blue-100";case"ai_pattern":return"text-purple-600 bg-purple-100";case"hybrid":return"text-indigo-600 bg-indigo-100";default:return"text-gray-600 bg-gray-100"}};return(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,e.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,e.jsxs)(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,e.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[(0,e.jsx)(L,{className:"w-8 h-8 text-purple-600"}),(0,e.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gerador de Questões IA"})]}),(0,e.jsx)("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Crie questões personalizadas baseadas em padrões de provas anteriores das universidades usando algoritmos avançados de inteligência artificial."})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,e.jsx)(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 sticky top-8",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,e.jsx)(W,{className:"w-5 h-5 mr-2 text-purple-600"}),"Configurações"]}),v&&(0,e.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,e.jsx)("p",{className:"text-sm text-red-600",children:v})}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matéria *"}),(0,e.jsxs)("select",{value:n,onChange:s=>M(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Selecione uma matéria"}),U.map(s=>(0,e.jsx)("option",{value:s,children:s},s))]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tópico (opcional)"}),(0,e.jsx)("input",{type:"text",value:N,onChange:s=>_(s.target.value),placeholder:"Ex: Função Quadrática",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dificuldade"}),(0,e.jsxs)("select",{value:b,onChange:s=>E(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Automática"}),$.map(s=>(0,e.jsx)("option",{value:s.value,children:s.label},s.value))]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Universidade"}),(0,e.jsxs)("select",{value:f,onChange:s=>Q(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Todas"}),G.map(s=>(0,e.jsx)("option",{value:s,children:s},s))]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Geração"}),(0,e.jsx)("div",{className:"space-y-2",children:I.map(s=>(0,e.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,e.jsx)("input",{type:"radio",name:"method",value:s.value,checked:w===s.value,onChange:t=>T(t.target.value),className:"mt-1 mr-3"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium text-sm",children:s.label}),(0,e.jsx)("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.value))})]}),(0,e.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,e.jsx)("button",{onClick:D,disabled:y||!n,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Gerando...":"Gerar Uma Questão"}),(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsx)("input",{type:"number",value:A,onChange:s=>R(Math.max(1,Math.min(10,parseInt(s.target.value)||1))),min:"1",max:"10",className:"w-20 px-3 py-2 border border-gray-300 rounded-md text-center"}),(0,e.jsx)("button",{onClick:B,disabled:y,className:"flex-1 btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Gerar Lote"})]})]})]})]})}),(0,e.jsxs)(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-2",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,e.jsx)(K,{className:"w-5 h-5 mr-2 text-green-600"}),"Questões Geradas (",p.length,")"]}),p.length>0&&(0,e.jsx)("button",{onClick:()=>c([]),className:"text-sm text-gray-500 hover:text-gray-700",children:"Limpar Todas"})]}),p.length===0?(0,e.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[(0,e.jsx)(H,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma questão gerada ainda"}),(0,e.jsx)("p",{className:"text-gray-500",children:'Configure os parâmetros e clique em "Gerar Uma Questão" para começar.'})]}):(0,e.jsx)("div",{className:"space-y-6",children:p.map((s,t)=>(0,e.jsxs)(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"bg-white rounded-lg shadow p-6",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${P(s.difficulty)}`,children:s.difficulty==="easy"?"Fácil":s.difficulty==="medium"?"Médio":"Difícil"}),(0,e.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${z(s.generationMethod)}`,children:s.generationMethod==="template"?"Template":s.generationMethod==="ai_pattern"?"IA":"Híbrido"}),(0,e.jsxs)("span",{className:"text-xs text-gray-500",children:["Confiança: ",(s.confidence*100).toFixed(0),"%"]})]}),(0,e.jsxs)("div",{className:"text-sm text-gray-600",children:[s.university," • ",s.subject,s.topic&&` • ${s.topic}`]})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Questão:"}),(0,e.jsx)("p",{className:"text-gray-700 leading-relaxed",children:s.question})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Alternativas:"}),(0,e.jsx)("div",{className:"space-y-2",children:s.alternatives.map((a,l)=>{const d=s.userAnswer===l,m=l===s.correctAnswer,o=s.showResult;let u="border-gray-200 bg-white hover:bg-gray-50";return o?m?u="border-green-300 bg-green-50 text-green-800":d&&!m?u="border-red-300 bg-red-50 text-red-800":u="border-gray-200 bg-gray-50":d&&(u="border-blue-300 bg-blue-50 text-blue-800"),(0,e.jsxs)("button",{onClick:()=>!s.isAnswered&&F(s.id,l),disabled:s.isAnswered,className:`w-full flex items-center p-3 rounded-md border transition-colors ${u} ${s.isAnswered?"cursor-default":"cursor-pointer"}`,children:[o&&m?(0,e.jsx)(C,{className:"w-5 h-5 text-green-600 mr-3 flex-shrink-0"}):o&&d&&!m?(0,e.jsx)(S,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0"}):(0,e.jsx)("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex-shrink-0 ${d&&!o?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:d&&!o&&(0,e.jsx)("div",{className:"w-full h-full rounded-full bg-white scale-50"})}),(0,e.jsxs)("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+l),")"]}),(0,e.jsx)("span",{className:o&&m?"font-medium":"",children:a})]},l)})})]}),s.isAnswered&&!s.showResult&&(0,e.jsx)("div",{className:"flex justify-center mb-4",children:(0,e.jsx)("button",{onClick:()=>O(s.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md font-medium transition-colors",children:"Ver Resultado e Explicação"})}),s.showResult&&(0,e.jsxs)(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"pt-4 border-t border-gray-200",children:[(0,e.jsx)("div",{className:`p-3 rounded-md mb-4 ${s.userAnswer===s.correctAnswer?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:(0,e.jsxs)("div",{className:"flex items-center",children:[s.userAnswer===s.correctAnswer?(0,e.jsx)(C,{className:"w-5 h-5 text-green-600 mr-2"}):(0,e.jsx)(S,{className:"w-5 h-5 text-red-600 mr-2"}),(0,e.jsx)("span",{className:`font-medium ${s.userAnswer===s.correctAnswer?"text-green-800":"text-red-800"}`,children:s.userAnswer===s.correctAnswer?"Parabéns! Resposta correta!":`Resposta incorreta. A alternativa correta é ${String.fromCharCode(65+s.correctAnswer)}.`})]})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Explicação:"}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:s.explanation})]})]})]},s.id))})]})]})]})})}export{se as t};
