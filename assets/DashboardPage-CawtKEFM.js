import{a as g}from"./rolldown-runtime-Dq6TatWD.js";import{B as u,O as L,P as X,St as I,Z as R,d as A,h as M,jt as T,m as C,o as F,q as Q,s as $,wt as n}from"./react-vendor-wmn9h6gZ.js";import{n as r}from"./vendor-BgSL8lot.js";import{t as E}from"./index-Cj0bNE3Y.js";import{t as p}from"./RankingService-pYRZgRhH.js";var c=g(T()),e=g(I());function O(){const{user:a,isLoading:j}=E(),[d,y]=(0,c.useState)(null),[N,f]=(0,c.useState)([]),[s,v]=(0,c.useState)(null),[b,m]=(0,c.useState)(!0);(0,c.useEffect)(()=>{a&&w()},[a]);const w=async()=>{m(!0);try{const[t,l]=await Promise.all([p.getUserRanking(),p.getGlobalRanking(5)]);if(y(t),f(l),a?.statistics){const i=a.statistics,k=a.level||1,_=a.experience||0,o=k*200,h=_%o,D=o-h;v({totalSimulations:i.totalSimulations||0,totalQuestions:i.totalQuestions||0,correctAnswers:i.correctAnswers||0,averageScore:i.averageScore||0,timeSpent:Math.round((i.timeSpent||0)/60),streakDays:i.streakDays||0,nextLevelXP:D,currentLevelXP:h,maxLevelXP:o})}}catch(t){console.error("Erro ao carregar dados da dashboard:",t)}finally{m(!1)}},x=t=>{if(t<60)return`${t}min`;const l=Math.floor(t/60),i=t%60;return`${l}h ${i}min`};if(j||b)return(0,e.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,e.jsxs)("div",{className:"animate-pulse",children:[(0,e.jsx)("div",{className:"h-8 bg-gray-300 rounded w-64 mb-6"}),(0,e.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(t=>(0,e.jsxs)("div",{className:"card",children:[(0,e.jsx)("div",{className:"h-6 bg-gray-300 rounded w-48 mb-4"}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,e.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]})]},t))})]})});if(!a)return(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8 text-center",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Acesso Negado"}),(0,e.jsx)("p",{className:"text-gray-600 mb-6",children:"FaÃ§a login para acessar sua dashboard."}),(0,e.jsx)(n,{to:"/login",className:"btn-primary",children:"Fazer Login"})]});const S=s&&s.maxLevelXP?(s?.currentLevelXP||0)/s.maxLevelXP*100:0,P=s?.totalQuestions&&s.totalQuestions>0?(s?.correctAnswers||0)/s.totalQuestions*100:0;return(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,e.jsxs)(r.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center md:text-left",children:[(0,e.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:["OlÃ¡, ",a.name.split(" ")[0],"! ðŸ‘‹"]}),(0,e.jsx)("p",{className:"text-gray-600",children:"Bem-vindo de volta Ã  sua jornada de estudos"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,e.jsx)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-primary-100 text-sm font-medium",children:"Simulados"}),(0,e.jsx)("p",{className:"text-3xl font-bold",children:s?.totalSimulations||0}),(0,e.jsx)("p",{className:"text-primary-200 text-sm mt-1",children:"Realizados"})]}),(0,e.jsx)(R,{className:"w-12 h-12 text-primary-200"})]})}),(0,e.jsx)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-green-100 text-sm font-medium",children:"PrecisÃ£o"}),(0,e.jsxs)("p",{className:"text-3xl font-bold",children:[P.toFixed(1),"%"]}),(0,e.jsxs)("p",{className:"text-green-200 text-sm mt-1",children:[s?.correctAnswers||0,"/",s?.totalQuestions||0," acertos"]})]}),(0,e.jsx)(u,{className:"w-12 h-12 text-green-200"})]})}),(0,e.jsx)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-orange-100 text-sm font-medium",children:"Tempo Estudado"}),(0,e.jsx)("p",{className:"text-3xl font-bold",children:x(s?.timeSpent||0)}),(0,e.jsx)("p",{className:"text-orange-200 text-sm mt-1",children:"Total"})]}),(0,e.jsx)(X,{className:"w-12 h-12 text-orange-200"})]})}),(0,e.jsx)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-purple-100 text-sm font-medium",children:"SequÃªncia"}),(0,e.jsx)("p",{className:"text-3xl font-bold",children:s?.streakDays||0}),(0,e.jsx)("p",{className:"text-purple-200 text-sm mt-1",children:"Dias seguidos"})]}),(0,e.jsx)(L,{className:"w-12 h-12 text-purple-200"})]})})]}),(0,e.jsxs)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold flex items-center",children:[(0,e.jsx)(A,{className:"w-6 h-6 mr-2 text-yellow-500"}),"NÃ­vel ",a.level||1]}),(0,e.jsxs)("span",{className:"text-sm text-gray-600",children:[s?.nextLevelXP||0," XP para o prÃ³ximo nÃ­vel"]})]}),(0,e.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,e.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 h-3 rounded-full transition-all duration-500",style:{width:`${S}%`}})}),(0,e.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,e.jsxs)("span",{children:[s?.currentLevelXP||0," XP"]}),(0,e.jsxs)("span",{children:[s?.maxLevelXP||200," XP"]})]})]}),(0,e.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,e.jsxs)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,e.jsx)($,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Seu Ranking"]}),(0,e.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,e.jsx)("span",{className:"text-gray-600",children:"PosiÃ§Ã£o Global"}),(0,e.jsxs)("span",{className:"font-bold text-primary-600",children:["#",d?.globalPosition||"--"]})]}),a.university&&(0,e.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,e.jsxs)("span",{className:"text-gray-600",children:["PosiÃ§Ã£o na ",a.university]}),(0,e.jsxs)("span",{className:"font-bold text-secondary-600",children:["#",d?.universityPosition||"--"]})]})]}),(0,e.jsxs)("div",{className:"border-t pt-4",children:[(0,e.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Top 5 Global"}),(0,e.jsx)("div",{className:"space-y-2",children:N.slice(0,3).map((t,l)=>(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold mr-3 ${l===0?"bg-yellow-500 text-white":l===1?"bg-gray-400 text-white":"bg-orange-400 text-white"}`,children:l+1}),(0,e.jsx)("span",{className:"text-sm",children:t.name})]}),(0,e.jsxs)("span",{className:"text-xs text-gray-500",children:[t.statistics.averageScore.toFixed(1),"%"]})]},t._id))}),(0,e.jsx)(n,{to:"/ranking",className:"block mt-4 text-center text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Ver ranking completo â†’"})]})]}),(0,e.jsxs)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,e.jsx)(Q,{className:"w-6 h-6 mr-2 text-green-500"}),"AÃ§Ãµes RÃ¡pidas"]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)(n,{to:"/simulations",className:"flex items-center p-4 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors group",children:[(0,e.jsx)(M,{className:"w-8 h-8 text-primary-600 mr-3 group-hover:scale-110 transition-transform"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-medium text-primary-900",children:"Fazer Simulado"}),(0,e.jsx)("p",{className:"text-sm text-primary-600",children:"Continue seus estudos"})]})]}),(0,e.jsxs)(n,{to:"/simulations/create",className:"flex items-center p-4 bg-secondary-50 hover:bg-secondary-100 rounded-lg transition-colors group",children:[(0,e.jsx)(C,{className:"w-8 h-8 text-secondary-600 mr-3 group-hover:scale-110 transition-transform"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-medium text-secondary-900",children:"Criar Simulado"}),(0,e.jsx)("p",{className:"text-sm text-secondary-600",children:"Personalizado para vocÃª"})]})]}),(0,e.jsxs)(n,{to:"/ranking",className:"flex items-center p-4 bg-yellow-50 hover:bg-yellow-100 rounded-lg transition-colors group",children:[(0,e.jsx)(F,{className:"w-8 h-8 text-yellow-600 mr-3 group-hover:scale-110 transition-transform"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-medium text-yellow-900",children:"Ver Ranking"}),(0,e.jsx)("p",{className:"text-sm text-yellow-600",children:"Compare seu progresso"})]})]})]}),(0,e.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg text-white",children:[(0,e.jsx)("h3",{className:"font-medium mb-2",children:"ðŸ’¡ Dica do Dia"}),(0,e.jsx)("p",{className:"text-sm opacity-90",children:"FaÃ§a simulados regulares para manter seu progresso constante. ConsistÃªncia Ã© a chave para o sucesso!"})]})]})]}),(0,e.jsxs)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"card",children:[(0,e.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,e.jsx)(u,{className:"w-6 h-6 mr-2 text-blue-500"}),"Meta da Semana"]}),(0,e.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[s?.totalSimulations||0,"/5"]}),(0,e.jsx)("div",{className:"text-sm text-blue-700",children:"Simulados"}),(0,e.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:(0,e.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min((s?.totalSimulations||0)/5*100,100)}%`}})})]}),(0,e.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:[s?.streakDays||0,"/7"]}),(0,e.jsx)("div",{className:"text-sm text-green-700",children:"Dias Seguidos"}),(0,e.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2 mt-2",children:(0,e.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min((s?.streakDays||0)/7*100,100)}%`}})})]}),(0,e.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[x(s?.timeSpent||0),"/180min"]}),(0,e.jsx)("div",{className:"text-sm text-purple-700",children:"Tempo de Estudo"}),(0,e.jsx)("div",{className:"w-full bg-purple-200 rounded-full h-2 mt-2",children:(0,e.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${Math.min((s?.timeSpent||0)/180*100,100)}%`}})})]})]})]})]})}export{O as default};
