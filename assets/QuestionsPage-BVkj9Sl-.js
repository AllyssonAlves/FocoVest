import{a as N}from"./rolldown-runtime-Dq6TatWD.js";import{St as C,bt as P,jt as S}from"./react-vendor-wmn9h6gZ.js";var x=N(S());const E=["Matemática","Português","Física","Química","Biologia","História","Geografia","Literatura","Inglês","Filosofia","Sociologia","Artes","Educação Física"],A=["UVA","UECE","UFC","URCA","IFCE","ENEM"],Q=[{value:"easy",label:"Fácil"},{value:"medium",label:"Médio"},{value:"hard",label:"Difícil"}];var k="http://localhost:5000/api",F=class{async fetchApi(a,n={}){const l=localStorage.getItem("token"),c={"Content-Type":"application/json",...l&&{Authorization:`Bearer ${l}`}},i=await fetch(`${k}${a}`,{headers:{...c,...n.headers},...n});if(!i.ok){const o=await i.json().catch(()=>({message:"Erro de rede"}));throw new Error(o.message||"Erro na requisição")}return i.json()}async getQuestions(a={}){const n=new URLSearchParams;Object.entries(a).forEach(([c,i])=>{i!=null&&i!==""&&(Array.isArray(i)?n.append(c,i.join(",")):n.append(c,i.toString()))});const l=n.toString();return this.fetchApi(`/questions${l?`?${l}`:""}`)}async getQuestionById(a){return this.fetchApi(`/questions/${a}`)}async createQuestion(a){return this.fetchApi("/questions",{method:"POST",body:JSON.stringify(a)})}async updateQuestion(a,n){return this.fetchApi(`/questions/${a}`,{method:"PUT",body:JSON.stringify(n)})}async deleteQuestion(a){return this.fetchApi(`/questions/${a}`,{method:"DELETE"})}async getQuestionStats(){return this.fetchApi("/questions/stats/summary")}};const U=new F;var e=N(C());function T({question:a,showAnswer:n=!1,selectedAnswer:l,onAnswerSelect:c,showExplanation:i=!1,isAnswered:o=!1}){const[d,h]=(0,x.useState)(l||null),r=t=>{o||(h(t),c?.(t))},g=t=>{switch(t){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=t=>{switch(t){case"easy":return"Fácil";case"medium":return"Médio";case"hard":return"Difícil";default:return t}},y=t=>!o&&!n?d===t.letter?"bg-primary-50 border-primary-500 text-primary-700":"bg-white border-gray-200 hover:bg-gray-50":n&&t.isCorrect?"bg-green-100 border-green-500 text-green-700":d===t.letter&&!t.isCorrect?"bg-red-100 border-red-500 text-red-700":"bg-white border-gray-200";return(0,e.jsxs)("div",{className:"card space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,e.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[a.university," • ",a.examYear]}),(0,e.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(a.difficulty)}`,children:f(a.difficulty)}),(0,e.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a.subject})]}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.title})]}),(0,e.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,e.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.statement})}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Alternativas:"}),(0,e.jsx)("div",{className:"space-y-2",children:a.alternatives.map(t=>(0,e.jsx)("button",{onClick:()=>r(t.letter),disabled:o,className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 ${y(t)} ${o?"cursor-not-allowed":"cursor-pointer"}`,children:(0,e.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,e.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium",children:t.letter}),(0,e.jsx)("span",{className:"text-sm leading-relaxed",children:t.text})]})},t.letter))})]}),i&&a.explanation&&(0,e.jsxs)("div",{className:"border-t pt-4",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Explicação:"}),(0,e.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,e.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.explanation})})]}),a.topics.length>0&&(0,e.jsxs)("div",{className:"border-t pt-4",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Tópicos:"}),(0,e.jsx)("div",{className:"flex flex-wrap gap-2",children:a.topics.map((t,m)=>(0,e.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:t},m))})]})]})}function I(){const[a,n]=(0,x.useState)([]),[l,c]=(0,x.useState)(!1),[i,o]=(0,x.useState)(!1),[d,h]=(0,x.useState)({page:1,limit:10}),[r,g]=(0,x.useState)({currentPage:1,totalPages:1,totalQuestions:0,hasNext:!1,hasPrev:!1}),[f,y]=(0,x.useState)(""),t=async()=>{try{c(!0),o(!0);const s=await U.getQuestions(d);n(s.data),g(s.pagination)}catch(s){P.error(s.message||"Erro ao carregar questões")}finally{c(!1)}},m=(s,p)=>{h(u=>({...u,[s]:p,page:1}))},j=()=>{m("search",f),t()},w=()=>{t()},b=s=>{h(p=>({...p,page:s})),setTimeout(()=>t(),0)},v=()=>{h({page:1,limit:10}),y(""),o(!1),n([]),g({currentPage:1,totalPages:1,totalQuestions:0,hasNext:!1,hasPrev:!1})};return(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Banco de Questões"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Pratique com questões reais dos vestibulares das principais universidades do Ceará"})]}),(0,e.jsxs)("div",{className:"card mb-6",children:[(0,e.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Filtros"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,e.jsxs)("div",{className:"lg:col-span-2",children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),(0,e.jsxs)("div",{className:"flex space-x-2",children:[(0,e.jsx)("input",{type:"text",placeholder:"Buscar por título, enunciado ou explicação...",value:f,onChange:s=>y(s.target.value),onKeyPress:s=>s.key==="Enter"&&j(),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,e.jsx)("button",{onClick:j,className:"btn-primary px-4",children:"Buscar"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matéria"}),(0,e.jsxs)("select",{value:d.subject||"",onChange:s=>m("subject",s.target.value||void 0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Todas as matérias"}),E.map(s=>(0,e.jsx)("option",{value:s,children:s},s))]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Universidade"}),(0,e.jsxs)("select",{value:d.university||"",onChange:s=>m("university",s.target.value||void 0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Todas as universidades"}),A.map(s=>(0,e.jsx)("option",{value:s,children:s},s))]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dificuldade"}),(0,e.jsxs)("select",{value:d.difficulty||"",onChange:s=>m("difficulty",s.target.value||void 0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Todas as dificuldades"}),Q.map(s=>(0,e.jsx)("option",{value:s.value,children:s.label},s.value))]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Por página"}),(0,e.jsxs)("select",{value:d.limit||10,onChange:s=>m("limit",parseInt(s.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:5,children:"5 questões"}),(0,e.jsx)("option",{value:10,children:"10 questões"}),(0,e.jsx)("option",{value:20,children:"20 questões"}),(0,e.jsx)("option",{value:50,children:"50 questões"})]})]}),(0,e.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,e.jsx)("button",{onClick:v,className:"flex-1 btn-secondary",children:"Limpar filtros"}),(0,e.jsx)("button",{onClick:w,className:"flex-1 btn-primary",children:"Aplicar Filtros"})]})]})]}),i&&(0,e.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,e.jsx)("div",{className:"text-sm text-gray-600",children:l?"Carregando...":`${r.totalQuestions} questão${r.totalQuestions!==1?"ões":""} encontrada${r.totalQuestions!==1?"s":""}`}),r.totalPages>1&&(0,e.jsxs)("div",{className:"text-sm text-gray-600",children:["Página ",r.currentPage," de ",r.totalPages]})]}),i?l?(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando questões..."})]}):a.length===0?(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("div",{className:"text-6xl mb-4",children:"📚"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma questão encontrada"}),(0,e.jsx)("p",{className:"text-gray-600 mb-4",children:"Tente ajustar os filtros ou fazer uma nova busca"}),(0,e.jsx)("button",{onClick:v,className:"btn-primary",children:"Limpar filtros"})]}):(0,e.jsx)("div",{className:"space-y-6",children:a.map(s=>(0,e.jsx)(T,{question:s,showAnswer:!1,showExplanation:!1},s._id))}):(0,e.jsxs)("div",{className:"text-center py-16",children:[(0,e.jsx)("div",{className:"text-8xl mb-6",children:"🔍"}),(0,e.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-3",children:"Pronto para praticar?"}),(0,e.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Use os filtros acima para encontrar questões específicas por matéria, universidade, dificuldade ou faça uma busca por palavras-chave."}),(0,e.jsxs)("div",{className:"space-y-2 text-sm text-gray-500",children:[(0,e.jsxs)("p",{children:["💡 ",(0,e.jsx)("strong",{children:"Dica:"}),' Selecione uma matéria e clique em "Aplicar Filtros"']}),(0,e.jsx)("p",{children:"📚 Temos questões de Matemática, Português, Física, Química e mais"}),(0,e.jsx)("p",{children:"🎯 Questões reais das universidades UFC, UECE, UVA, URCA e IFCE"})]})]}),i&&r.totalPages>1&&(0,e.jsx)("div",{className:"mt-8 flex justify-center",children:(0,e.jsxs)("nav",{className:"inline-flex items-center space-x-1",children:[(0,e.jsx)("button",{onClick:()=>b(r.currentPage-1),disabled:!r.hasPrev,className:"px-3 py-2 text-sm text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Anterior"}),Array.from({length:Math.min(5,r.totalPages)},(s,p)=>{const u=Math.max(1,r.currentPage-2)+p;return u>r.totalPages?null:(0,e.jsx)("button",{onClick:()=>b(u),className:`px-3 py-2 text-sm rounded-md ${u===r.currentPage?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:u},u)}),(0,e.jsx)("button",{onClick:()=>b(r.currentPage+1),disabled:!r.hasNext,className:"px-3 py-2 text-sm text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Próximo →"})]})})]})}export{I as default};
