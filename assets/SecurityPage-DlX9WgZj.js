import{a as v}from"./rolldown-runtime-Dq6TatWD.js";import{$ as w,Pt as S,Tt as A,at as x,et as p,gt as u,rt as j,st as D,tt as C,xt as L}from"./react-vendor-BpwrftXY.js";import{n as r}from"./vendor-DgHb_Dai.js";import{t as M}from"./index-Daf2CfgW.js";var c=v(S()),e=v(A());function I(){const[t,N]=(0,c.useState)(null),[f,b]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),{token:l}=M(),d=async()=>{try{n(null);const a=await(await fetch("/api/auth/sessions",{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}})).json();a.success?N(a.data):n("Erro ao carregar sessões ativas")}catch(a){n("Erro de conexão"),console.error("Erro ao buscar sessões:",a)}finally{b(!1)}};(0,c.useEffect)(()=>{l&&d()},[l]);const k=(a,s)=>s.toLowerCase().includes("android")||s.toLowerCase().includes("ios")?p:s.toLowerCase().includes("ipad")||a.toLowerCase().includes("tablet")?w:x,g=a=>{const s=new Date(a),i=new Date().getTime()-s.getTime(),o=Math.floor(i/(1e3*60)),h=Math.floor(i/(1e3*60*60)),y=Math.floor(i/(1e3*60*60*24));return o<1?"Agora mesmo":o<60?`${o} min atrás`:h<24?`${h}h atrás`:y<7?`${y} dias atrás`:s.toLocaleDateString("pt-BR")};return f?(0,e.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,e.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,e.jsx)(j,{className:"w-8 h-8 animate-spin text-primary-600"})})}):m?(0,e.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)(L,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:m}),(0,e.jsx)("button",{onClick:d,className:"btn-primary",children:"Tentar Novamente"})]})}):(0,e.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,e.jsxs)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,e.jsx)(C,{className:"w-8 h-8 text-primary-600"}),(0,e.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Segurança da Conta"})]}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie suas sessões ativas e mantenha sua conta segura"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,e.jsx)(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,e.jsx)(x,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sessões Ativas"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t?.stats.activeSessions||0})]})]})}),(0,e.jsx)(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,e.jsx)(p,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dispositivos"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t?.stats.totalDevices||0})]})]})}),(0,e.jsx)(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,e.jsx)(u,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Última Atividade"}),(0,e.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t?.stats.lastActivity?g(t.stats.lastActivity.toString()):"N/A"})]})]})})]}),(0,e.jsx)("div",{className:"mb-8",children:(0,e.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,e.jsxs)("button",{onClick:d,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[(0,e.jsx)(j,{className:"w-4 h-4"}),(0,e.jsx)("span",{children:"Atualizar"})]})})}),(0,e.jsxs)(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden",children:[(0,e.jsxs)("div",{className:"p-6 border-b dark:border-gray-700",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Sessões Ativas"}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Dispositivos onde você está conectado atualmente"})]}),(0,e.jsxs)("div",{className:"divide-y dark:divide-gray-700",children:[t?.activeSessions.map((a,s)=>{const i=k("",a.os);return(0,e.jsx)(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:(0,e.jsx)("div",{className:"flex items-center justify-between",children:(0,e.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,e.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:(0,e.jsx)(i,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:[a.browser," em ",a.os]}),(0,e.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsx)(D,{className:"w-3 h-3"}),(0,e.jsx)("span",{children:a.ip})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsx)(u,{className:"w-3 h-3"}),(0,e.jsxs)("span",{children:["Ativo ",g(a.lastActivity)]})]})]})]})]})})},a.deviceId)}),(!t?.activeSessions||t.activeSessions.length===0)&&(0,e.jsxs)("div",{className:"p-12 text-center",children:[(0,e.jsx)(x,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Nenhuma sessão ativa encontrada"})]})]})]})]})})}export{I as default};
