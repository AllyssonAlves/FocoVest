import{a as S}from"./rolldown-runtime-Dq6TatWD.js";import{B as h,E as D,J as y,R as w,St as G,T as B,Z as L,d as V,jt as $,n as z,q as M,r as J,s as g,t as x,z as Q}from"./react-vendor-wmn9h6gZ.js";import{t as U}from"./index-Cj0bNE3Y.js";import{t as p}from"./RankingService-pYRZgRhH.js";var l=S($()),e=S(G()),Z=()=>{const{user:d}=U(),[c,_]=(0,l.useState)("global"),[n,C]=(0,l.useState)("all"),[u,k]=(0,l.useState)("month"),[j,f]=(0,l.useState)(!1),[b,N]=(0,l.useState)(null),[v,I]=(0,l.useState)([]),[t,T]=(0,l.useState)(null),P=["all","UFC","UECE","UVA","URCA","IFCE"];(0,l.useEffect)(()=>{(async()=>{f(!0),N(null);try{let a;n==="all"?a=await p.getGlobalRanking(10):a=await p.getUniversityRanking(n,10);const r=await p.getUserRanking(),o=a.map(i=>({...i,previousPosition:i.position+(Math.random()>.5?1:-1),badges:R(i),isCurrentUser:!1}));if(d){const i=o.findIndex(A=>A._id===d._id);i!==-1&&(o[i].isCurrentUser=!0)}const m=d?{currentPosition:r.globalPosition,totalUsers:r.totalUsers,scoreThisMonth:Math.floor(Math.random()*500)+1500,scoreLastMonth:Math.floor(Math.random()*400)+1300,trend:Math.random()>.5?"up":"down",positionChange:Math.floor(Math.random()*5)+1,simulationsThisMonth:Math.floor(Math.random()*15)+10,averageScoreThisMonth:Math.floor(Math.random()*20)+75,hoursThisMonth:Math.floor(Math.random()*30)+25,currentStreak:Math.floor(Math.random()*10)+3,bestStreak:Math.floor(Math.random()*15)+8,level:Math.floor(Math.random()*5)+6,nextLevelProgress:Math.floor(Math.random()*80)+20}:null;I(o),T(m)}catch(a){console.error("Erro ao carregar dados do ranking:",a),N(a.message||"Erro ao carregar ranking")}finally{f(!1)}})()},[n,u,d]);const R=s=>{const a=[];return s.position===1?a.push("ü•á"):s.position===2?a.push("ü•à"):s.position===3&&a.push("ü•â"),s.statistics.averageScore>90&&a.push("‚≠ê"),s.statistics.totalSimulations>50&&a.push("üî•"),s.statistics.totalQuestions>1e3&&a.push("üìö"),s.level>10&&a.push("üí™"),a},E=s=>{switch(s){case 1:return"text-yellow-500";case 2:return"text-gray-400";case 3:return"text-orange-500";default:return"text-blue-600"}},q=s=>{switch(s){case 1:return(0,e.jsx)(x,{className:"w-6 h-6"});case 2:return(0,e.jsx)(x,{className:"w-6 h-6"});case 3:return(0,e.jsx)(x,{className:"w-6 h-6"});default:return(0,e.jsx)("span",{className:"font-bold text-lg",children:s})}},F=(s,a)=>a?s<a?{type:"up",change:a-s}:s>a?{type:"down",change:s-a}:{type:"stable",change:0}:null;return(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800 py-8 transition-colors duration-200",children:(0,e.jsxs)("div",{className:"container mx-auto px-4 max-w-7xl",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsxs)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-2 flex items-center justify-center gap-3",children:[(0,e.jsx)(x,{className:"w-10 h-10 text-yellow-500"}),"Ranking FocoVest"]}),(0,e.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Competi√ß√£o saud√°vel entre estudantes das principais universidades do Cear√°"})]}),(0,e.jsx)("div",{className:"flex justify-center mb-8",children:(0,e.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 shadow-lg border border-gray-200 dark:border-gray-700 transition-colors duration-200",children:(0,e.jsx)("div",{className:"flex space-x-1",children:[{id:"global",label:"Ranking Global",icon:g},{id:"personal",label:"Meu Progresso",icon:h},{id:"achievements",label:"Conquistas",icon:V}].map(s=>(0,e.jsxs)("button",{onClick:()=>_(s.id),className:`flex items-center gap-2 px-6 py-3 rounded-md font-medium transition-all ${c===s.id?"bg-primary-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[(0,e.jsx)(s.icon,{className:"w-5 h-5"}),s.label]},s.id))})})}),c==="global"&&(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-lg border",children:(0,e.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(D,{className:"w-5 h-5 text-gray-500"}),(0,e.jsx)("span",{className:"font-medium text-gray-700",children:"Filtros:"})]}),(0,e.jsxs)("select",{value:n,onChange:s=>C(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"all",children:"Todas as Universidades"}),P.slice(1).map(s=>(0,e.jsx)("option",{value:s,children:s},s))]}),(0,e.jsxs)("select",{value:u,onChange:s=>k(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"week",children:"Esta Semana"}),(0,e.jsx)("option",{value:"month",children:"Este M√™s"}),(0,e.jsx)("option",{value:"all",children:"Todos os Tempos"})]})]})}),(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border",children:[(0,e.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,e.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,e.jsx)(g,{className:"w-6 h-6 text-yellow-500"}),"Top Estudantes",n!=="all"&&` - ${n}`]})}),j?(0,e.jsxs)("div",{className:"p-8 text-center",children:[(0,e.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando ranking..."})]}):b?(0,e.jsxs)("div",{className:"p-8 text-center",children:[(0,e.jsxs)("p",{className:"text-red-600 mb-4",children:["‚ùå ",b]}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Tentar Novamente"})]}):(0,e.jsxs)("div",{className:"p-6",children:[(0,e.jsx)("div",{className:"space-y-4",children:v.map((s,a)=>{const r=F(s.position,s.previousPosition);return(0,e.jsx)("div",{className:`p-4 rounded-lg border transition-all ${s.isCurrentUser?"bg-blue-50 border-blue-200 ring-2 ring-blue-400":a<3?"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,e.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a<3?E(s.position):"bg-primary-600 text-white"}`,children:q(s.position)}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("h3",{className:"font-bold text-lg text-gray-900",children:[s.name,s.isCurrentUser&&(0,e.jsx)("span",{className:"ml-2 px-2 py-1 bg-blue-600 text-white text-xs rounded-full",children:"Voc√™"})]}),s.badges&&(0,e.jsx)("div",{className:"flex gap-1",children:s.badges.map((o,m)=>(0,e.jsx)("span",{className:"text-lg",children:o},m))})]}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,e.jsxs)("span",{className:"flex items-center gap-1",children:[(0,e.jsx)(L,{className:"w-4 h-4"}),s.university]}),(0,e.jsxs)("span",{className:"flex items-center gap-1",children:[(0,e.jsx)(w,{className:"w-4 h-4"}),s.statistics.totalSimulations," simulados"]}),(0,e.jsxs)("span",{className:"flex items-center gap-1",children:[(0,e.jsx)(h,{className:"w-4 h-4"}),s.statistics.averageScore.toFixed(1),"% m√©dia"]})]})]})]}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(s.statistics.averageScore*10).toFixed(0)}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:"pontos"})]}),r&&r.type!=="stable"&&(0,e.jsxs)("div",{className:`flex items-center gap-1 ${r.type==="up"?"text-green-600":"text-red-600"}`,children:[r.type==="up"?(0,e.jsx)(M,{className:"w-4 h-4"}):(0,e.jsx)(y,{className:"w-4 h-4"}),(0,e.jsx)("span",{className:"text-xs font-medium",children:r.change})]})]}),(0,e.jsxs)("p",{className:"text-xs text-gray-500",children:["N√≠vel ",s.level]})]})]})},s._id)})}),v.length===0&&!j&&(0,e.jsx)("div",{className:"text-center py-8",children:(0,e.jsx)("p",{className:"text-gray-600",children:"Nenhum usu√°rio encontrado para os filtros selecionados."})})]})]})]}),c==="personal"&&t&&(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["#",t.currentPosition]}),(0,e.jsx)("p",{className:"text-gray-600",children:"Posi√ß√£o Global"})]}),(0,e.jsx)(g,{className:"w-8 h-8 text-yellow-500"})]}),(0,e.jsxs)("div",{className:"mt-2 flex items-center gap-1",children:[t.trend==="up"?(0,e.jsx)(M,{className:"w-4 h-4 text-green-600"}):(0,e.jsx)(y,{className:"w-4 h-4 text-red-600"}),(0,e.jsxs)("span",{className:`text-sm ${t.trend==="up"?"text-green-600":"text-red-600"}`,children:[t.positionChange," posi√ß√µes"]})]})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.simulationsThisMonth}),(0,e.jsx)("p",{className:"text-gray-600",children:"Simulados este m√™s"})]}),(0,e.jsx)(w,{className:"w-8 h-8 text-blue-500"})]}),(0,e.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["M√©dia: ",t.averageScoreThisMonth,"%"]})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.currentStreak}),(0,e.jsx)("p",{className:"text-gray-600",children:"Sequ√™ncia atual"})]}),(0,e.jsx)(J,{className:"w-8 h-8 text-orange-500"})]}),(0,e.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Recorde: ",t.bestStreak," dias"]})]})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border",children:[(0,e.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,e.jsx)(h,{className:"w-6 h-6 text-blue-500"}),"Evolu√ß√£o do Desempenho"]}),(0,e.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,e.jsx)(Q,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,e.jsx)("p",{children:"Gr√°fico de evolu√ß√£o em desenvolvimento"}),(0,e.jsx)("p",{className:"text-sm",children:"Dados hist√≥ricos sendo coletados..."})]})]})]}),c==="achievements"&&(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border",children:[(0,e.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,e.jsx)(z,{className:"w-6 h-6 text-yellow-500"}),"Sistema de Conquistas"]}),(0,e.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,e.jsx)(B,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,e.jsx)("p",{children:"Sistema de conquistas em desenvolvimento"}),(0,e.jsx)("p",{className:"text-sm",children:"Em breve voc√™ poder√° acompanhar suas conquistas e badges!"})]})]})]})})},X=Z;export{X as default};
