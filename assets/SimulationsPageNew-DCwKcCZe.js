import{a as w}from"./rolldown-runtime-Dq6TatWD.js";import{A as I,E as U,K as M,Pt as A,T as L,Tt as T,c as P,d as q,jt as $,m as D,n as F,p as k,r as R,v as B,y as G,z as V}from"./react-vendor-BpwrftXY.js";var l=w(A()),e=w(T()),N="http://localhost:5000/api",z=async()=>{try{console.log("🔄 Buscando simulações da API..."),console.log("📡 URL da API:",`${N}/simulations`);const t=new AbortController,o=setTimeout(()=>t.abort(),5e3),i=await fetch(`${N}/simulations`,{signal:t.signal,headers:{"Content-Type":"application/json"}});if(clearTimeout(o),console.log("📊 Status da resposta:",i.status),!i.ok)throw new Error(`Erro HTTP: ${i.status}`);const n=await i.json();return console.log("📦 Resposta da API:",n),console.log("📋 Simulações encontradas:",n.simulations?.length||0),n.simulations||[]}catch(t){return console.error("❌ Erro ao buscar simulações:",t),console.log("🔄 Usando dados de fallback..."),[{_id:"1",title:"Simulado Geral - Vestibular UFC 2024",description:"Simulado completo com questões das principais matérias cobradas no vestibular da UFC",settings:{timeLimit:180,questionsCount:30,subjects:["Geral"],universities:["UFC"],difficulty:["medium"]},category:"vestibular",status:"active",tags:["vestibular","ufc","geral"],isPublic:!0,createdAt:"2024-02-01",estimatedDuration:180},{_id:"2",title:"Matemática Intensivo - UECE",description:"Foque nas questões de matemática mais difíceis da UECE",settings:{timeLimit:90,questionsCount:15,subjects:["Matemática"],universities:["UECE"],difficulty:["hard"]},category:"especifico",status:"active",tags:["matemática","uece","difícil"],isPublic:!0,createdAt:"2024-02-05",estimatedDuration:90},{_id:"3",title:"ENEM Completo 2023",description:"Simulado completo do ENEM com 180 questões de todas as áreas do conhecimento",settings:{timeLimit:330,questionsCount:180,subjects:["Linguagens","Matemática","Ciências Humanas","Ciências da Natureza"],universities:["ENEM"],difficulty:["medium"]},category:"nacional",status:"active",tags:["enem","completo","nacional"],isPublic:!0,createdAt:"2024-03-01",estimatedDuration:330},{_id:"4",title:"ENEM Express - Revisão Rápida",description:"Simulado rápido do ENEM com 45 questões para revisão eficiente",settings:{timeLimit:90,questionsCount:45,subjects:["Geral"],universities:["ENEM"],difficulty:["medium"]},category:"revisao",status:"active",tags:["enem","revisão","rápido"],isPublic:!0,createdAt:"2024-03-02",estimatedDuration:90}]}},H=t=>{if(!t||isNaN(t)||t<=0)return"Tempo livre";if(t<60)return`${t} min`;const o=Math.floor(t/60),i=t%60;return i===0?`${o}h`:`${o}h ${i}min`},O=t=>!t||isNaN(t)||t<=0?"Questões variáveis":`${t} questão${t>1?"ões":""}`,Q=()=>{const t=$(),[o,i]=(0,l.useState)([]),[n,f]=(0,l.useState)(!0),[x,p]=(0,l.useState)("grid"),[d,v]=(0,l.useState)(""),[u,C]=(0,l.useState)(""),[m,E]=(0,l.useState)(""),[b,j]=(0,l.useState)("popular");(0,l.useEffect)(()=>{let s=!0;return(async()=>{if(s){console.log("🚀 Iniciando carregamento de simulações..."),f(!0);try{const a=await z();s&&(console.log("✅ Dados carregados:",a),i(a))}catch(a){s&&console.error("❌ Erro ao carregar simulações:",a)}finally{s&&(f(!1),console.log("🏁 Loading finalizado"))}}})(),()=>{s=!1}},[]);const g=o.filter(s=>{const r=s.title.toLowerCase().includes(d.toLowerCase())||s.description.toLowerCase().includes(d.toLowerCase()),a=!u||s.settings.universities?.includes(u),h=!m||s.category===m;return r&&a&&h}),c=[...g].sort((s,r)=>{switch(b){case"recent":return new Date(r.createdAt).getTime()-new Date(s.createdAt).getTime();case"duration":return s.settings.timeLimit-r.settings.timeLimit;case"difficulty":const a={easy:1,medium:2,hard:3},h=s.settings.difficulty?.[0]||"medium",_=r.settings.difficulty?.[0]||"medium";return(a[_]||2)-(a[h]||2);default:return 0}}),S=s=>{switch(s?.[0]||"medium"){case"easy":return"text-green-700 bg-green-50";case"medium":return"text-yellow-700 bg-yellow-50";case"hard":return"text-red-700 bg-red-50";default:return"text-gray-700 bg-gray-50"}},y=s=>(0,e.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200 overflow-hidden group",children:[(0,e.jsxs)("div",{className:"p-6 pb-4",children:[(0,e.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:s.settings.universities?.[0]||"Geral"}),s.category==="vestibular"&&(0,e.jsx)(R,{className:"w-4 h-4 text-orange-500"}),s.isPublic&&(0,e.jsx)(F,{className:"w-4 h-4 text-yellow-500"})]}),(0,e.jsx)("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${S(s.settings.difficulty)}`,children:s.settings.difficulty?.[0]?.charAt(0).toUpperCase()+(s.settings.difficulty?.[0]?.slice(1)||"Médio")})]}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:s.title}),(0,e.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.description}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(I,{className:"w-4 h-4"}),(0,e.jsx)("span",{children:H(s.settings.timeLimit)})]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(V,{className:"w-4 h-4"}),(0,e.jsx)("span",{children:O(s.settings.questionsCount)})]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(P,{className:"w-4 h-4"}),(0,e.jsx)("span",{children:s.settings.subjects?.[0]||"Geral"})]})]}),s.tags.length>0&&(0,e.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:s.tags.slice(0,3).map((r,a)=>(0,e.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["#",r]},a))})]}),(0,e.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("button",{onClick:()=>t(`/integrated-simulation/${s._id}`),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1 transition-colors",children:[(0,e.jsx)(U,{className:"w-4 h-4"}),"Ver Detalhes"]}),(0,e.jsxs)("button",{onClick:()=>t(`/integrated-simulation/${s._id}`),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[(0,e.jsx)(D,{className:"w-4 h-4"}),"Iniciar"]})]})})]},s._id);return(0,e.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,e.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,e.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,e.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)(M,{className:"w-8 h-8 text-blue-600"}),(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Simulados"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,e.jsx)("button",{onClick:()=>p("grid"),className:`p-2 rounded-md transition-colors ${x==="grid"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:(0,e.jsx)(q,{className:"w-4 h-4"})}),(0,e.jsx)("button",{onClick:()=>p("list"),className:`p-2 rounded-md transition-colors ${x==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:(0,e.jsx)(G,{className:"w-4 h-4"})})]}),(0,e.jsxs)("button",{onClick:()=>t("/simulations/create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors",children:[(0,e.jsx)(k,{className:"w-4 h-4"}),"Criar Simulado"]})]})]})})}),(0,e.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,e.jsx)("div",{className:"mb-8",children:(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[(0,e.jsxs)("div",{className:"flex-1 relative",children:[(0,e.jsx)(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,e.jsx)("input",{type:"text",id:"search-simulations",name:"searchSimulations",placeholder:"Buscar simulados...",value:d,onChange:s=>v(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"})]}),(0,e.jsxs)("div",{className:"flex gap-3",children:[(0,e.jsxs)("select",{id:"filter-university",name:"filterUniversity",value:u,onChange:s=>C(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Todas Universidades"}),(0,e.jsx)("option",{value:"ENEM",children:"ENEM"}),(0,e.jsx)("option",{value:"UFC",children:"UFC"}),(0,e.jsx)("option",{value:"UECE",children:"UECE"}),(0,e.jsx)("option",{value:"UVA",children:"UVA"}),(0,e.jsx)("option",{value:"URCA",children:"URCA"}),(0,e.jsx)("option",{value:"IFCE",children:"IFCE"})]}),(0,e.jsxs)("select",{id:"filter-category",name:"filterCategory",value:m,onChange:s=>E(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"",children:"Todas Categorias"}),(0,e.jsx)("option",{value:"geral",children:"Geral"}),(0,e.jsx)("option",{value:"especifico",children:"Específico"}),(0,e.jsx)("option",{value:"vestibular",children:"Vestibular"}),(0,e.jsx)("option",{value:"revisao",children:"Revisão"})]}),(0,e.jsxs)("select",{id:"sort-by",name:"sortBy",value:b,onChange:s=>j(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,e.jsx)("option",{value:"popular",children:"Mais Popular"}),(0,e.jsx)("option",{value:"recent",children:"Mais Recente"}),(0,e.jsx)("option",{value:"difficulty",children:"Dificuldade"}),(0,e.jsx)("option",{value:"duration",children:"Duração"})]})]})]})}),!d&&!u&&!m&&g.length>0&&(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Simulados em Destaque"}),(0,e.jsx)("button",{onClick:()=>{v(""),j("popular")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver todos"})]}),(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.slice(0,3).map(s=>y(s))})]}),n&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,e.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando simulados..."})]}),!n&&(0,e.jsxs)(e.Fragment,{children:[(d||u||m)&&c.length>0&&(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Resultados da Busca"}),(0,e.jsxs)("p",{className:"text-gray-600",children:[c.length," simulado",c.length!==1?"s":""," encontrado",c.length!==1?"s":""]})]}),c.length===0?(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(L,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,e.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum simulado encontrado"}),(0,e.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Tente ajustar os filtros ou criar um novo simulado."})]}):(0,e.jsx)("div",{className:`grid gap-6 ${x==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:c.map(y)})]})]})]})},J=Q;export{J as default};
